!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).QNAudioRecorder={})}(this,function(e){var t,n,o=/*#__PURE__*/function(){function e(){}return e.calculateAudioLevel=function(e,t,n){for(var o,r=0,i=0;i<t;i++){var a=e[i];r+=(a/=n)*a}var c=-127;return(r=0==t?0:Math.sqrt(r/t))>0?(o=20*Math.log10(r))<c?o=c:o>0&&(o=0):o=c,(Math.round(o)+127)/127},e}(),r=new(window.AudioContext||window.webkitAudioContext)({latencyHint:"interactive"}),i=r.createScriptProcessor(4096,1,1),a=r.createGain();function c(){n&&(n.disconnect(),n=void 0),t&&(t.getTracks().forEach(function(e){return e.stop()}),t=void 0),r.suspend()}a.gain.value=0,i.connect(a),a.connect(r.destination),e.start=function(e){try{return c(),Promise.resolve(navigator.mediaDevices.getUserMedia({audio:!0})).then(function(a){(n=r.createMediaStreamSource(t=a)).connect(i),i.onaudioprocess=function(t){var n=t.inputBuffer.getChannelData(0);n=Int16Array.from(n.map(function(e){return e>0?32767*e:32768*e}));var r=o.calculateAudioLevel(n,4096,32767);e(r)},r.resume()})}catch(e){return Promise.reject(e)}},e.stop=function(){c()}});
//# sourceMappingURL=bundle.js.map
